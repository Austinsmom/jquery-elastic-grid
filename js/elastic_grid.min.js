function parseVideoURL(t){var i,e={},s=/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;return-1!=t.indexOf("youtube.com/watch")?(e.provider="youtube",e.id=function(t,i){var e=new RegExp("(\\?|&)"+i+"\\=([^&]*)(&|$)"),s=t.match(e);return s?s[2]:""}(t,"v"),e.embed="//www.youtube.com/embed/"+e.id+"?fs=0"):(i=t.match(s))?(e.provider="youtube",e.id=i[2],e.embed="//www.youtube.com/embed/"+e.id+"?fs=0"):(i=t.match(/vimeo.com\/(\d+)/))&&(e.provider="vimeo",e.id=i[1],e.embed="//player.vimeo.com/video/"+e.id+"?fullscreen=0"),e}!function(t,i,e){"use strict";var s,n,o=t.event;s=o.special.debouncedresize={setup:function(){t(this).on("resize",s.handler)},teardown:function(){t(this).off("resize",s.handler)},handler:function(t,i){var e=this,a=arguments,r=function(){t.type="debouncedresize",o.dispatch.apply(e,a)};n&&clearTimeout(n),i?r():n=setTimeout(r,s.threshold)},threshold:150};var a="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";t.fn.imagesLoaded=function(i){function e(){var e=t(d),s=t(c);o&&(c.length?o.reject(h,e,s):o.resolve(h)),t.isFunction(i)&&i.call(n,h,e,s)}function s(i,s){i.src!==a&&-1===t.inArray(i,l)&&(l.push(i),s?c.push(i):d.push(i),t.data(i,"imagesLoaded",{isBroken:s,src:i.src}),r&&o.notifyWith(t(i),[s,h,t(d),t(c)]),h.length===l.length&&(setTimeout(e),h.unbind(".imagesLoaded")))}var n=this,o=t.isFunction(t.Deferred)?t.Deferred():0,r=t.isFunction(o.notify),h=n.find("img").add(n.filter("img")),l=[],d=[],c=[];return t.isPlainObject(i)&&t.each(i,function(t,e){"callback"===t?i=e:o&&o[t](e)}),h.length?h.bind("load.imagesLoaded error.imagesLoaded",function(t){s(t.target,"error"===t.type)}).each(function(i,e){var n=e.src,o=t.data(e,"imagesLoaded");o&&o.src===n?s(e,o.isBroken):e.complete&&void 0!==e.naturalWidth?s(e,0===e.naturalWidth||0===e.naturalHeight):(e.readyState||e.complete)&&(e.src=a,e.src=n)}):e(),o?o.promise(n):n};var r=t(i),h=i.Modernizr;t.Elastislide=function(i,e){this.$el=t(e),this._init(i)},t.Elastislide.defaults={orientation:"horizontal",speed:500,easing:"ease-in-out",minItems:3,start:0,onClick:function(t,i,e){return!1},onReady:function(){return!1},onBeforeSlide:function(){return!1},onAfterSlide:function(){return!1}},t.Elastislide.prototype={_init:function(i){this.options=t.extend(!0,{},t.Elastislide.defaults,i);var e=this,s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};if(this.transEndEventName=s[h.prefixed("transition")],this.support=h.csstransitions&&h.csstransforms,this.current=this.options.start,this.isSliding=!1,this.$items=this.$el.children("li"),this.itemsCount=this.$items.length,0===this.itemsCount)return!1;this._validate(),this.$items.detach(),this.$el.empty(),this.$el.append(this.$items),this.$el.wrap('<div class="elastislide-wrapper elastislide-loading elastislide-'+this.options.orientation+'"></div>'),this.hasTransition=!1,this.hasTransitionTimeout=setTimeout(function(){e._addTransition()},100),this.$el.imagesLoaded(function(){e.$el.show(),e._layout(),e._configure(),e.hasTransition?(e._removeTransition(),e._slideToItem(e.current),e.$el.on(e.transEndEventName,function(){e.$el.off(e.transEndEventName),e._setWrapperSize(),e._addTransition(),e._initEvents()})):(clearTimeout(e.hasTransitionTimeout),e._setWrapperSize(),e._initEvents(),e._slideToItem(e.current),setTimeout(function(){e._addTransition()},25)),e.options.onReady()})},_validate:function(){this.options.speed<0&&(this.options.speed=500),(this.options.minItems<1||this.options.minItems>this.itemsCount)&&(this.options.minItems=1),(this.options.start<0||this.options.start>this.itemsCount-1)&&(this.options.start=0),"horizontal"!=this.options.orientation&&"vertical"!=this.options.orientation&&(this.options.orientation="horizontal")},_layout:function(){this.$el.wrap('<div class="elastislide-carousel"></div>'),this.$carousel=this.$el.parent(),this.$wrapper=this.$carousel.parent().removeClass("elastislide-loading");var t=this.$items.find("img:first");this.imgSize={width:t.outerWidth(!0),height:t.outerHeight(!0)},this._setItemsSize(),"horizontal"===this.options.orientation?this.$el.css("max-height",this.imgSize.height):this.$el.css("height",this.options.minItems*this.imgSize.height),this._addControls()},_addTransition:function(){this.support&&this.$el.css("transition","all "+this.options.speed+"ms "+this.options.easing),this.hasTransition=!0},_removeTransition:function(){this.support&&this.$el.css("transition","all 0s"),this.hasTransition=!1},_addControls:function(){var i=this;this.$navigation=t('<nav><span class="elastislide-prev">Previous</span><span class="elastislide-next">Next</span></nav>').appendTo(this.$wrapper),this.$navPrev=this.$navigation.find("span.elastislide-prev").on("mousedown.elastislide",function(t){return i._slide("prev"),!1}),this.$navNext=this.$navigation.find("span.elastislide-next").on("mousedown.elastislide",function(t){return i._slide("next"),!1})},_setItemsSize:function(){var t="horizontal"===this.options.orientation?100*Math.floor(this.$carousel.width()/this.options.minItems)/this.$carousel.width():100;this.$items.css({width:t+"%","max-width":this.imgSize.width,"max-height":this.imgSize.height}),"vertical"===this.options.orientation&&this.$wrapper.css("max-width",this.imgSize.width+parseInt(this.$wrapper.css("padding-left"))+parseInt(this.$wrapper.css("padding-right")))},_setWrapperSize:function(){"vertical"===this.options.orientation&&this.$wrapper.css({height:this.options.minItems*this.imgSize.height+parseInt(this.$wrapper.css("padding-top"))+parseInt(this.$wrapper.css("padding-bottom"))})},_configure:function(){this.fitCount="horizontal"===this.options.orientation?this.$carousel.width()<this.options.minItems*this.imgSize.width?this.options.minItems:Math.floor(this.$carousel.width()/this.imgSize.width):this.$carousel.height()<this.options.minItems*this.imgSize.height?this.options.minItems:Math.floor(this.$carousel.height()/this.imgSize.height)},_initEvents:function(){var i=this;r.on("debouncedresize.elastislide",function(){i._setItemsSize(),i._configure(),i._slideToItem(i.current)}),this.$el.on(this.transEndEventName,function(){i._onEndTransition()}),"horizontal"===this.options.orientation?this.$el.on({swipeleft:function(){i._slide("next")},swiperight:function(){i._slide("prev")}}):this.$el.on({swipeup:function(){i._slide("next")},swipedown:function(){i._slide("prev")}}),this.$el.on("click.elastislide","li",function(e){var s=t(this);i.options.onClick(s,s.index(),e)})},_destroy:function(t){this.$el.off(this.transEndEventName).off("swipeleft swiperight swipeup swipedown .elastislide"),r.off(".elastislide"),this.$el.css({"max-height":"none",transition:"none"}).unwrap(this.$carousel).unwrap(this.$wrapper),this.$items.css({width:"auto","max-width":"none","max-height":"none"}),this.$navigation.remove(),this.$wrapper.remove(),t&&t.call()},_toggleControls:function(t,i){i?"next"===t?this.$navNext.show():this.$navPrev.show():"next"===t?this.$navNext.hide():this.$navPrev.hide()},_slide:function(i,e){if(this.isSliding)return!1;this.options.onBeforeSlide(),this.isSliding=!0;var s=this,n=this.translation||0,o="horizontal"===this.options.orientation?this.$items.outerWidth(!0):this.$items.outerHeight(!0),a=this.itemsCount*o,r="horizontal"===this.options.orientation?this.$carousel.width():this.$carousel.height();if(void 0===e){if((l=this.fitCount*o)<0)return!1;if("next"===i&&a-(Math.abs(n)+l)<r)l=a-(Math.abs(n)+r),this._toggleControls("next",!1),this._toggleControls("prev",!0);else if("prev"===i&&Math.abs(n)-l<0)l=Math.abs(n),this._toggleControls("next",!0),this._toggleControls("prev",!1);else{var h="next"===i?Math.abs(n)+Math.abs(l):Math.abs(n)-Math.abs(l);h>0?this._toggleControls("prev",!0):this._toggleControls("prev",!1),h<a-r?this._toggleControls("next",!0):this._toggleControls("next",!1)}e="next"===i?n-l:n+l}else{var l=Math.abs(e);Math.max(a,r)-l<r&&(e=-(Math.max(a,r)-r)),l>0?this._toggleControls("prev",!0):this._toggleControls("prev",!1),Math.max(a,r)-r>l?this._toggleControls("next",!0):this._toggleControls("next",!1)}if(this.translation=e,n===e)return this._onEndTransition(),!1;if(this.support)"horizontal"===this.options.orientation?this.$el.css("transform","translateX("+e+"px)"):this.$el.css("transform","translateY("+e+"px)");else{t.fn.applyStyle=this.hasTransition?t.fn.animate:t.fn.css;var d="horizontal"===this.options.orientation?{left:e}:{top:e};this.$el.stop().applyStyle(d,t.extend(!0,[],{duration:this.options.speed,complete:function(){s._onEndTransition()}}))}this.hasTransition||this._onEndTransition()},_onEndTransition:function(){this.isSliding=!1,this.options.onAfterSlide()},_slideTo:function(t){var t=t||this.current,i=Math.abs(this.translation)||0,e="horizontal"===this.options.orientation?this.$items.outerWidth(!0):this.$items.outerHeight(!0),s=i+this.$carousel.width(),n=Math.abs(t*e);(n+e>s||n<i)&&this._slideToItem(t)},_slideToItem:function(t){var i="horizontal"===this.options.orientation?t*this.$items.outerWidth(!0):t*this.$items.outerHeight(!0);this._slide("",-i)},add:function(t){var i=this,e=this.current,s=this.$items.eq(this.current);this.$items=this.$el.children("li"),this.itemsCount=this.$items.length,this.current=s.index(),this._setItemsSize(),this._configure(),this._removeTransition(),e<this.current?this._slideToItem(this.current):this._slide("next",this.translation),setTimeout(function(){i._addTransition()},25),t&&t.call()},setCurrent:function(t,i){this.current=t,this._slideTo(),i&&i.call()},next:function(){self._slide("next")},previous:function(){self._slide("prev")},slideStart:function(){this._slideTo(0)},slideEnd:function(){this._slideTo(this.itemsCount-1)},destroy:function(t){this._destroy(t)}};var l=function(t){i.console&&i.console.error(t)};t.fn.elastislide=function(i){var e=t.data(this,"elastislide");if("string"==typeof i){var s=Array.prototype.slice.call(arguments,1);this.each(function(){e?t.isFunction(e[i])&&"_"!==i.charAt(0)?e[i].apply(e,s):l("no such method '"+i+"' for elastislide self"):l("cannot call methods on elastislide prior to initialization; attempted to call method '"+i+"'")})}else this.each(function(){e?e._init():e=t.data(this,"elastislide",new t.Elastislide(i,this))});return e}}(jQuery,window),function(t,i,e){"use strict";t.HoverDir=function(i,e){this.$el=t(e),this._init(i)},t.HoverDir.defaults={speed:300,easing:"ease",hoverDelay:0,inverse:!1},t.HoverDir.prototype={_init:function(i){this.options=t.extend(!0,{},t.HoverDir.defaults,i),this.transitionProp="all "+this.options.speed+"ms "+this.options.easing,this.support=Modernizr.csstransitions,this._loadEvents()},_loadEvents:function(){var i=this;this.$el.on("mouseenter.hoverdir, mouseleave.hoverdir",function(e){var s=t(this),n=s.find("figure"),o=i._getDir(s,{x:e.pageX,y:e.pageY}),a=i._getStyle(o);"mouseenter"===e.type?(n.hide().css(a.from),clearTimeout(i.tmhover),i.tmhover=setTimeout(function(){n.show(0,function(){var e=t(this);i.support&&e.css("transition",i.transitionProp),i._applyAnimation(e,a.to,i.options.speed)})},i.options.hoverDelay)):(i.support&&n.css("transition",i.transitionProp),clearTimeout(i.tmhover),i._applyAnimation(n,a.from,i.options.speed))})},_getDir:function(t,i){var e=t.width(),s=t.height(),n=(i.x-t.offset().left-e/2)*(e>s?s/e:1),o=(i.y-t.offset().top-s/2)*(s>e?e/s:1);return Math.round((Math.atan2(o,n)*(180/Math.PI)+180)/90+3)%4},_getStyle:function(t){var i,e,s={left:"0px",top:"-100%"},n={left:"0px",top:"100%"},o={left:"-100%",top:"0px"},a={left:"100%",top:"0px"},r={top:"0px"},h={left:"0px"};switch(t){case 0:i=this.options.inverse?n:s,e=r;break;case 1:i=this.options.inverse?o:a,e=h;break;case 2:i=this.options.inverse?s:n,e=r;break;case 3:i=this.options.inverse?a:o,e=h}return{from:i,to:e}},_applyAnimation:function(i,e,s){t.fn.applyStyle=this.support?t.fn.css:t.fn.animate,i.stop().applyStyle(e,t.extend(!0,[],{duration:s+"ms"}))}};var s=function(t){i.console&&i.console.error(t)};t.fn.hoverdir=function(i){var e=t.data(this,"hoverdir");if("string"==typeof i){var n=Array.prototype.slice.call(arguments,1);this.each(function(){e?t.isFunction(e[i])&&"_"!==i.charAt(0)?e[i].apply(e,n):s("no such method '"+i+"' for hoverdir instance"):s("cannot call methods on hoverdir prior to initialization; attempted to call method '"+i+"'")})}else this.each(function(){e?e._init():e=t.data(this,"hoverdir",new t.HoverDir(i,this))});return e}}(jQuery,window);var $event=$.event,$special,resizeTimeout;$special=$event.special.debouncedresize={setup:function(){$(this).on("resize",$special.handler)},teardown:function(){$(this).off("resize",$special.handler)},handler:function(t,i){var e=this,s=arguments,n=function(){t.type="debouncedresize",$event.dispatch.apply(e,s)};resizeTimeout&&clearTimeout(resizeTimeout),i?n():resizeTimeout=setTimeout(n,$special.threshold)},threshold:250};var BLANK="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";$.fn.imagesLoaded=function(t){function i(){var i=$(h),e=$(l);n&&(l.length?n.reject(a,i,e):n.resolve(a)),$.isFunction(t)&&t.call(s,a,i,e)}function e(t,e){t.src!==BLANK&&-1===$.inArray(t,r)&&(r.push(t),e?l.push(t):h.push(t),$.data(t,"imagesLoaded",{isBroken:e,src:t.src}),o&&n.notifyWith($(t),[e,a,$(h),$(l)]),a.length===r.length&&(setTimeout(i),a.unbind(".imagesLoaded")))}var s=this,n=$.isFunction($.Deferred)?$.Deferred():0,o=$.isFunction(n.notify),a=s.find("img").add(s.filter("img")),r=[],h=[],l=[];return $.isPlainObject(t)&&$.each(t,function(i,e){"callback"===i?t=e:n&&n[i](e)}),a.length?a.bind("load.imagesLoaded error.imagesLoaded",function(t){e(t.target,"error"===t.type)}).each(function(t,i){var s=i.src,n=$.data(i,"imagesLoaded");n&&n.src===s?e(i,n.isBroken):i.complete&&void 0!==i.naturalWidth?e(i,0===i.naturalWidth||0===i.naturalHeight):(i.readyState||i.complete)&&(i.src=BLANK,i.src=s)}):i(),n?n.promise(s):s},$(function(){$.elastic_grid={version:"1.0"},$.fn.elastic_grid=function(t){function i(t,i){t.each(function(t,e){classie.has(e,i)?(classie.toggle(e,"animate"),classie.remove(e,"hidden")):(classie.add(e,"hidden"),classie.remove(e,"animate"))})}function e(t){var i=t.toLowerCase().replace(" ","-");if(""!=t){var e=$("<li>");$("<a>",{html:t,"data-filter":"."+i,href:"#",class:"filter"}).appendTo(e);e.appendTo(w)}}function s(t){y.each(function(){var i=$(this);i.data("offsetTop",i.offset().top),t&&(i.find("img").load(function(){console.log(i.outerHeight()),i.data("height",i.height())}).each(function(){this.complete&&$(this).load()}),setTimeout(function(){i.data("height",i.height())}))})}function n(){o(y),I.on("debouncedresize",function(){C=0,z=-1,s(),a(),void 0!==$.data(this,"preview")&&h()})}function o(t){t.on("click","span.og-close",function(){return h(),!1}).children("a").on("click",function(t){var i=$(this).parent();return i.removeClass("animate"),a(),A===i.index()?h($(this)):r(i),!1})}function a(){b={width:I.width(),height:I.height()}}function r(t){h();var i=$.data(this,"preview"),e=t[0].offsetTop;if(C=0,void 0!==i){if(z===e)return i.update(t),!1;e>z&&(C=i.height),h()}z=e,(i=$.data(this,"preview",new l(t))).open()}function h(){y.find(".og-pointer").remove(),A=-1;var t=$.data(this,"preview");void 0===t||t.close(),$.removeData(this,"preview")}function l(t){this.$item=t,this.expandedIdx=this.$item.index(),this.create(),this.update()}t=$.extend({},{items:null,filterEffect:"",hoverDirection:!0,hoverDelay:0,hoverInverse:!1,expandingHeight:500,expandingSpeed:300,callback:function(){}},t);var d=$(this),c=t.items.length;if(0==c)return!1;d.html('<div class="wagwep-container"><nav id="porfolio-nav" class="clearfix"><ul id="portfolio-filter" class="nav nav-tabs clearfix"></ul></nav></div>');var p=$('<ul id="og-grid" class="og-grid"></ul>');for(itemIdx=0;itemIdx<c;itemIdx++)if(void 0!=t.items[itemIdx]){var u=t.items[itemIdx];liObject=$("<li></li>"),tags=u.tags,strTag="";for(var f=tags.length-1;f>=0;f--)strTag+=","+tags[f];strTag=strTag.substring(1),liObject.attr("data-tags",strTag),aObject=$("<a></a>"),aObject.attr("href","javascript:;;"),imgObject=$("<img/>");var m=u.thumbnail[0],g=u.large[0],v=parseVideoURL(g);"youtube"!=v.provider&&"vimeo"!=v.provider||(g=!1,imgObject.attr("data-video",v.embed)),imgObject.attr("src",m),imgObject.attr("data-largesrc",g),imgObject.attr("alt",u.img_title[0]),imgObject.attr("title",u.img_title[0]),spanObject=$("<span></span>"),spanObject.html(u.title),figureObject=$("<figure></figure>"),figureObject.append(spanObject),imgObject.appendTo(aObject),figureObject.appendTo(aObject),aObject.appendTo(liObject),liObject.appendTo(p)}""==t.filterEffect&&(t.filterEffect="moveup"),p.addClass("effect-"+t.filterEffect),p.appendTo(d),1==t.hoverDirection&&p.find("li").each(function(){$(this).hoverdir({hoverDelay:t.hoverDelay,inverse:t.hoverInverse})});var w=d.find("#portfolio-filter"),_=p.find("li"),T={};numOfTag=0,_.each(function(i){var e=$(this),s=e.data("tags").split(",");e.attr("data-id",i),e.addClass(t.showAllText.toLowerCase().replace(" ","-")),$.each(s,function(t,i){i=$.trim(i),e.addClass(i.toLowerCase().replace(" ","-")),i in T||(T[i]=[],numOfTag++),T[i].push(e)})}),numOfTag>1?(e(t.showAllText),$.each(T,function(t,i){e(t)})):w.remove(),w.find("a").bind("click",function(t){x.find("li.og-expanded").find("a").trigger("click"),x.find(".og-close").trigger("click"),$this=$(this),$this.css("outline","none"),w.find(".current").removeClass("current"),$this.parent().addClass("current");var e=$this.text().toLowerCase().replace(" ","-"),s=c;return p.find("li").each(function(t,n){classie.remove(n,"hidden"),classie.remove(n,"animate"),--s||setTimeout(function(){i(p.find("li"),e)},1)}),!1}),w.find("li:first").addClass("current");var b,x=p,y=x.children("li"),A=-1,z=-1,C=0,I=$(window),E=$("html, body"),O={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"}[Modernizr.prefixed("transition")],S=Modernizr.csstransitions,L={minHeight:t.expandingHeight,speed:t.expandingSpeed,easing:"ease"};l.prototype={create:function(){this.$title=$("<h3></h3>"),this.$description=$("<p></p>"),this.$href=$('<a href="#">Visit website</a>'),this.$detailButtonList=$('<span class="buttons-list"></span>'),this.$details=$('<div class="og-details"></div>').append(this.$title,this.$description,this.$detailButtonList),this.$loading=$('<div class="og-loading"></div>'),this.$fullimage=$('<div class="og-fullimg"></div>').append(this.$loading),this.$closePreview=$('<span class="og-close"></span>'),this.$previewInner=$('<div class="og-expander-inner"></div>').append(this.$closePreview,this.$fullimage,this.$details),this.$previewEl=$('<div class="og-expander"></div>').append(this.$previewInner),this.$item.append($('<div class="og-pointer"></div>')),this.$item.append(this.getEl()),S&&this.setTransition()},update:function(i){if(i&&(this.$item=i),-1!==A&&(y.eq(A).removeClass("og-expanded"),this.$item.addClass("og-expanded"),this.positionPreview()),A=this.$item.index(),void 0===t.items[A]);else{if(eldata=t.items[A],this.$title.html(eldata.title),this.$description.html(eldata.description),this.$detailButtonList.html(""),urlList=eldata.button_list,urlList.length>0)for(f=0;f<urlList.length;f++){var e=urlList[f].new_window?"_blank":"_self";(h=$('<a target="'+e+'"></a>')).addClass("link-button"),0==f&&h.addClass("first"),h.attr("href",urlList[f].url),h.html(urlList[f].title),this.$detailButtonList.append(h)}var s=this;if(void 0!==s.$largeImg&&s.$largeImg.remove(),glarge=eldata.large,gthumbs=eldata.thumbnail,imgTitle=eldata.img_title,glarge.length==gthumbs.length&&glarge.length>0){var n=$("<ul></ul>");for(f=0;f<gthumbs.length;f++){var o=gthumbs[f],a=glarge[f],r=$("<li></li>"),h=$('<a href="javascript:;;"></a>'),l=$("<img/>");l.addClass("related_photo"),0==f&&l.addClass("selected");var d=parseVideoURL(a);"youtube"!=d.provider&&"vimeo"!=d.provider||(a=!1,l.attr("data-video",d.embed)),l.attr("src",o),l.attr("data-large",a),l.attr("alt",imgTitle[f]),l.attr("title",imgTitle[f]),h.append(l),r.append(h),n.append(r)}n.addClass("elastislide-list"),n.elastislide();var c=$('<div class="elastislide-wrapper elastislide-horizontal"></div>');c.append(n).find(".related_photo").bind("click",function(){c.find(".selected").removeClass("selected"),$(this).addClass("selected"),g=$(this).data("video"),v=$(this).data("large"),$titlePhoto=$(this).attr("title"),v&&void 0!=typeof g?$("<img/>").load(function(){s.$fullimage.find("iframe").fadeOut(500,function(){s.$fullimage.find("img").fadeIn(500).attr("alt",$titlePhoto).attr("title",$titlePhoto).attr("src",v)})}).attr("alt",$titlePhoto).attr("title",$titlePhoto).attr("src",v):s.$fullimage.find("img").fadeOut(500,function(){s.$fullimage.find("iframe").fadeIn(500).attr("src",g)})}),s.$details.append('<div class="infosep"></div>'),s.$details.append(c)}else s.$details.find(".infosep, .og-grid-small").remove();if(s.$fullimage.is(":visible")){this.$loading.show();var p=$('<iframe width="100%" height="100%" frameborder="0"></iframe>'),u=$("<img/>");s.$fullimage.append(p),s.$fullimage.append(u);var m=s.$item.children("a").find("img"),g=m.data("video"),v=m.data("largesrc");v&&void 0!=typeof g?u.load(function(){var t=$(this);t.attr("src")===v&&(s.$loading.hide(),s.$fullimage.find("img").remove(),s.$largeImg=t.fadeIn(350),s.$fullimage.find("iframe").fadeOut(500,function(){s.$fullimage.append(s.$largeImg)}))}).attr("src",eldata.large[0]):(s.$loading.hide(),s.$fullimage.find("img").fadeOut(500,function(){s.$fullimage.find("iframe").fadeIn(500).attr("src",g)}))}}},open:function(){setTimeout($.proxy(function(){this.setHeights(),this.positionPreview()},this),25)},close:function(){var t=this,i=function(){S&&$(this).off(O),t.$item.removeClass("og-expanded"),t.$previewEl.remove()};return setTimeout($.proxy(function(){void 0!==this.$largeImg&&this.$largeImg.fadeOut("fast"),this.$previewEl.css("height",0);var t=y.eq(this.expandedIdx);t.css("height",t.data("height")).on(O,i),S||i.call()},this),25),!1},calcHeight:function(){var t=b.height-this.$item.data("height")-10,i=b.height;t<L.minHeight&&(t=L.minHeight,i=L.minHeight+this.$item.data("height")+10),this.height=t,this.itemHeight=i},setHeights:function(){var t=this,i=function(){S&&t.$item.off(O),t.$item.addClass("og-expanded")};this.calcHeight(),this.$previewEl.css("height",this.height),this.$item.css("height",this.itemHeight).on(O,i),S||i.call()},positionPreview:function(){var t=this.$item[0].offsetTop,i=this.$previewEl.offset().top-C,e=this.height+this.$item.data("height")+10<=b.height?t:this.height<b.height?i-(b.height-this.height):i;E.animate({scrollTop:e},L.speed)},setTransition:function(){this.$previewEl.css("transition","height "+L.speed+"ms "+L.easing),this.$item.css("transition","height "+L.speed+"ms "+L.easing)},getEl:function(){return this.$previewEl}},x.imagesLoaded(function(){n(),a(),s(!0)})}});